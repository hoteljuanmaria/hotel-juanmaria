import type { Payload } from 'payload'
import type { FaqsPage } from '@/payload-types'

// Seed data structure for FAQsPage global (text-only fields, images are optional)
export const seedFAQsPageData = {
  title: 'Preguntas Frecuentes',
  subtitle:
    'Encuentre respuestas rÃ¡pidas a las preguntas mÃ¡s comunes sobre nuestros servicios y polÃ­ticas.',

  // FAQ Categories with questions organized by topic
  categories: [
    {
      categoryTitle: 'Reservas y PolÃ­ticas',
      categoryDescription:
        'Todo lo que necesita saber sobre nuestras polÃ­ticas de reserva, cancelaciÃ³n y check-in/check-out.',
      categoryIcon: 'clock',
      questions: [
        {
          question: 'Â¿CuÃ¡les son los horarios de check-in y check-out?',
          answer:
            'El check-in es a las 3:00 PM y el check-out a las 1:00 PM. Ofrecemos check-in temprano y check-out tardÃ­o sujeto a disponibilidad con posibles cargos adicionales.',
          questionIcon: 'clock',
          featured: true,
        },
        {
          question: 'Â¿Puedo cancelar mi reserva?',
          answer:
            'Las cancelaciones gratuitas deben realizarse hasta 24 horas antes del check-in. Las tarifas no reembolsables no permiten cancelaciones.',
          questionIcon: 'x',
          featured: true,
        },
        {
          question: 'Â¿QuÃ© mÃ©todos de pago aceptan?',
          answer:
            'Aceptamos todas las tarjetas de crÃ©dito principales (Visa, MasterCard, American Express), efectivo en pesos colombianos y transferencias bancarias.',
          questionIcon: 'credit-card',
          featured: false,
        },
      ],
    },
    {
      categoryTitle: 'Servicios del Hotel',
      categoryDescription:
        'InformaciÃ³n sobre los servicios disponibles durante su estadÃ­a con nosotros.',
      categoryIcon: 'utensils',
      questions: [
        {
          question: 'Â¿Incluye desayuno la tarifa de la habitaciÃ³n?',
          answer:
            'Algunas tarifas incluyen desayuno buffet. Durante el proceso de reserva se especifica quÃ© estÃ¡ incluido en cada tarifa.',
          questionIcon: 'utensils',
          featured: true,
        },
        {
          question: 'Â¿QuÃ© servicios incluye el spa?',
          answer:
            'Nuestro spa ofrece masajes, tratamientos faciales, sauna, baÃ±o turco y paquetes de relajaciÃ³n. Consulte horarios y precios en recepciÃ³n.',
          questionIcon: 'heart',
          featured: false,
        },
        {
          question: 'Â¿Tienen servicio de transporte al aeropuerto?',
          answer:
            'SÃ­, ofrecemos servicio de transporte VIP al aeropuerto. Debe reservarse con anticipaciÃ³n y tiene costo adicional.',
          questionIcon: 'plane',
          featured: false,
        },
      ],
    },
    {
      categoryTitle: 'Instalaciones',
      categoryDescription:
        'Detalles sobre las instalaciones y comodidades disponibles en nuestro hotel.',
      categoryIcon: 'car',
      questions: [
        {
          question: 'Â¿Tienen estacionamiento disponible?',
          answer:
            'SÃ­, ofrecemos estacionamiento gratuito y seguro para nuestros huÃ©spedes las 24 horas.',
          questionIcon: 'car',
          featured: true,
        },
        {
          question: 'Â¿El WiFi es gratuito?',
          answer:
            'SÃ­, ofrecemos WiFi gratuito de alta velocidad en todas las Ã¡reas del hotel y habitaciones.',
          questionIcon: 'wifi',
          featured: true,
        },
        {
          question: 'Â¿Tienen habitaciones para no fumadores?',
          answer:
            'Todo el hotel es 100% libre de humo conforme a la Ley 1335 de 2009. Todas nuestras habitaciones y Ã¡reas comunes son para no fumadores.',
          questionIcon: 'shield',
          featured: false,
        },
      ],
    },
    {
      categoryTitle: 'PolÃ­ticas Especiales',
      categoryDescription:
        'InformaciÃ³n sobre nuestras polÃ­ticas especiales y compromisos sociales.',
      categoryIcon: 'shield',
      questions: [
        {
          question: 'Â¿Aceptan mascotas?',
          answer:
            'No permitimos mascotas, excepto animales de servicio debidamente certificados conforme a la legislaciÃ³n vigente.',
          questionIcon: 'shield',
          featured: false,
        },
        {
          question: 'Â¿QuÃ© compromisos tienen con la sostenibilidad?',
          answer:
            'Estamos certificados en sostenibilidad turÃ­stica NTS-TS 002. Implementamos prÃ¡cticas de ahorro de agua y energÃ­a, manejo de residuos, protecciÃ³n del patrimonio cultural y prevenciÃ³n de la ESCNNA.',
          questionIcon: 'leaf',
          featured: true,
        },
        {
          question: 'Â¿CÃ³mo puedo ejercer mis derechos sobre datos personales?',
          answer:
            'Puede ejercer sus derechos de acceso, rectificaciÃ³n, actualizaciÃ³n o supresiÃ³n de datos contactÃ¡ndonos en datos@hoteljuanmaria.com o llamando al (2) 224-4562 en horario de atenciÃ³n.',
          questionIcon: 'database',
          featured: false,
        },
      ],
    },
    {
      categoryTitle: 'General',
      categoryDescription:
        'Otras preguntas comunes que pueden ser de su interÃ©s.',
      categoryIcon: 'help-circle',
      questions: [
        {
          question: 'Â¿DÃ³nde estÃ¡n ubicados?',
          answer:
            'Estamos ubicados en el centro de TuluÃ¡, Valle del Cauca, cerca de los principales atractivos turÃ­sticos y comerciales de la ciudad.',
          questionIcon: 'help-circle',
          featured: false,
        },
        {
          question: 'Â¿Tienen salones para eventos?',
          answer:
            'SÃ­, contamos con salones completamente equipados para eventos corporativos, sociales y familiares. Consulte disponibilidad y cotizaciones en recepciÃ³n.',
          questionIcon: 'help-circle',
          featured: false,
        },
      ],
    },
  ],

  // Support Section
  supportTitle: 'Â¿No encontrÃ³ su respuesta?',
  supportDescription:
    'Nuestro equipo de atenciÃ³n al cliente estÃ¡ disponible para ayudarle con cualquier consulta adicional.',
  contactButtonText: 'Contactar Soporte',
  contactButtonLink: '/contacto',
  backToTopText: 'Volver al inicio',

  // Settings
  showStats: true,
  enableSearch: false,
  animationsEnabled: true,

  // Publication info
  publishedAt: new Date().toISOString(),
  _status: 'published' as const,
}

/**
 * Seeds the FAQsPage global with comprehensive FAQ data (text-only)
 * @param payload - Payload CMS instance
 */
export async function seedFAQsPage(payload: Payload): Promise<FaqsPage> {
  try {
    console.log('ðŸ“ Seeding FAQsPage global with FAQ data...')

    // Use only text data, no images
    const faqsPage = await payload.updateGlobal({
      slug: 'faqs-page',
      data: seedFAQsPageData,
    })

    console.log('âœ… FAQsPage global seeded successfully!')
    console.log(
      `ðŸ“Š Categories: ${seedFAQsPageData.categories.length}`,
    )
    console.log(
      `â“ Total questions: ${seedFAQsPageData.categories.reduce((total, cat) => total + cat.questions.length, 0)}`,
    )
    console.log(
      'ðŸ“ Note: Background image can be uploaded later through the admin interface at /admin',
    )

    return faqsPage
  } catch (error) {
    console.error('âŒ Error seeding FAQsPage:', error)

    // Provide more helpful error information
    if (error instanceof Error && 'data' in error) {
      const validationError = error as any
      if (validationError.data?.errors) {
        console.log('\nðŸ“‹ Validation errors details:')
        validationError.data.errors.forEach((err: any, index: number) => {
          console.log(`  ${index + 1}. ${err.field}: ${err.message}`)
        })
        console.log('\nðŸ’¡ Tips:')
        console.log(
          '  - Check that all required fields are properly configured',
        )
        console.log(
          '  - You can upload images through the admin interface at /admin',
        )
        console.log('  - Make sure your database is running and accessible')
      }
    }

    throw error
  }
}

// Make this script executable
async function main() {
  // Check if this module is being run directly
  const isMainModule = import.meta.url === `file://${process.argv[1]}`

  if (isMainModule) {
    console.log('ðŸŒ± Starting FAQsPage seeding process...')

    try {
      // Load environment variables if not already loaded
      if (!process.env.PAYLOAD_SECRET) {
        const dotenv = await import('dotenv')
        dotenv.config()

        if (!process.env.PAYLOAD_SECRET) {
          console.error('âŒ PAYLOAD_SECRET environment variable is required')
          console.log(
            'ðŸ’¡ Make sure you have a .env file with PAYLOAD_SECRET set',
          )
          process.exit(1)
        }
      }

      // Import Payload and configuration
      const { getPayload } = await import('payload')
      const config = await import('@payload-config')

      // Initialize Payload
      console.log('ðŸ”§ Initializing Payload CMS...')
      const payload = await getPayload({ config: config.default })

      // Run the seed function
      console.log('ðŸ“‹ Seeding FAQsPage global...')
      await seedFAQsPage(payload)

      console.log('ðŸŽ‰ FAQsPage seeding completed successfully!')
      process.exit(0)
    } catch (error) {
      console.error('ðŸ’¥ Failed to seed FAQsPage:', error)
      console.log('\nðŸ” Troubleshooting tips:')
      console.log(
        '  - Make sure you have a .env file with proper environment variables',
      )
      console.log('  - Ensure PAYLOAD_SECRET is set in your environment')
      console.log('  - Check that your database is running and accessible')
      console.log(
        '  - Run `pnpm dev` first to ensure the application starts correctly',
      )
      process.exit(1)
    }
  }
}

// Execute if this file is run directly
main().catch((error) => {
  console.error('ðŸ’¥ Unexpected error:', error)
  process.exit(1)
})